url = "/"
layout = "default"
title = "SpongeBoost"
is_hidden = 0
meta_description = "The SpongeBoost project"
robot_index = "index"
robot_follow = "follow"

[jumbotron our-mission]
jumbotron = "our-mission"
title = 0
background = "transperant"
templates = "template3"
description_limit = 0

[jumbotron numbers]
jumbotron = "numbers"
title = 0
background = "transperant"
templates = "template3"
description_limit = 0
==
<?php
use Pensoft\Articles\Models\Article;
use Pensoft\Calendar\Models\Entry;
use Carbon\Carbon;


function onStart(){

    $this['entries'] = Entry::where('end', '>', Carbon::now())->where('show_on_timeline', true)->where('is_internal', false)->orderBy('start', 'asc')->take(6)->get();

    $this['highlights'] = Article::news()->where('published', 'true')->descPublished()->take(3)->get()->map(function($item){
        $item->content = str_limit(strip_tags($item->content), 90);
        $item->href = $item->slug;
        return $item;
    });
}
?>
==
<!-- Mission -->
<section class="container-fluid mission-container mt-2" aria-labelledby="mission-heading">
    {% component "our-mission" %}
</section>

<!-- Numbers -->
<section class="container-fluid project-numbers-container" aria-labelledby="numbers-heading">
    {% component "numbers" %}
</section>

<!-- News -->
{% if highlights.count %}
<section class="container-fluid latest-news-container" aria-labelledby="latest-news-heading">
    <div class="container mb-0 pb-0">
        <div class="col-xs-12 bubble-title" aria-hidden="true">News</div>
        <div class="row">
            <div class="col-md-6 col-xs-12">
                <h2 id="latest-news-heading">Latest news</h2>
            </div>
            <div class="col-md-6 col-xs-12 text-right">
                <div class="button_su">
                    <span class="su_button_circle" aria-hidden="true"></span>
                    <a href="{{'news'|page}}" class="button_su_inner">
                        <span class="button_text_container">Read more</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="container mt-1 pt-0">
        <div class="row news-row">
            <div class="col-md-5 col-xs-12 latest-news">
                {% if highlights|length %}
                <article class="news-card">
                    <div class="news-card-content">
                        <div class="img-container">
                            <a href="{{'news'|page}}/{{highlights[0].slug}}" aria-label="Read {{ highlights[0].title }}">
                                <img src="{{ highlights[0].cover.thumb(475, 283, {'mode': 'crop'}) }}" alt="{{ highlights[0].title }}">
                            </a>
                        </div>
                        <div class="content-container">
                            <a href="{{'news'|page}}/{{highlights[0].slug}}">
                                <h3>{{ highlights[0].title|length > 70 ? highlights[0].title|striptags|slice(0, 70)|replace({"&nbsp;": " ", ".": ". "}) ~ '...' : highlights[0].title|striptags|replace({"&nbsp;": " ", ".": ". "})  }}</h3>
                            </a>
                            <div class="highlight-content">{{ highlights[0].content | raw }}</div>
                            <a href="{{'news'|page}}/{{highlights[0].slug}}" class="read-more" aria-label="Read more about {{ highlights[0].title }}">Read more</a>
                        </div>
                    </div>
                </article>
                {% endif %}
            </div>
            <div class="col-md-7 col-xs-12 highlight-news">
                <div class="col-xs-12 highlight-news-container">
                    {% for article in highlights|slice(1, 2) %}
                    <article class="row news-card">
                        <div class="col-md-4 img-container">
                            <a href="{{'news'|page}}/{{article.slug}}" aria-label="Read {{ article.title }}">
                                <img src="{{ article.cover.thumb(205, 187, {'mode': 'crop'}) }}" alt="{{ article.title }}">
                            </a>
                        </div>
                        <div class="col-md-8 content-container">
                            <div class="col-xs-12">
                                <a href="{{'news'|page}}/{{article.slug}}">
                                    <h3>{{ article.title|length > 70 ? article.title|striptags|slice(0, 70)|replace({"&nbsp;": " ", ".": ". "}) ~ '...' : article.title|striptags|replace({"&nbsp;": " ", ".": ". "})  }}</h3>
                                </a>
                            </div>
                            <div class="col-xs-12 highlight-content">{{ article.content | raw}}</div>
                            <div class="col-xs-12">
                                <a href="{{'news'|page}}/{{article.slug}}" class="read-more" aria-label="Read more about {{ article.title }}">Read more</a>
                            </div>
                        </div>
                    </article>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}


<!-- Events -->
{% if entries.count %}
<section class="container-fluid entries-container" aria-labelledby="upcoming-events-heading">
    <div class="container mb-0 pb-0">
        <div class="col-xs-12 bubble-title" aria-hidden="true">Events</div>
        <div class="row events-head">
            <div class="start-xs events-title">
                <h2 id="upcoming-events-heading">Upcoming events</h2>
            </div>
            <nav class="slick-arrows end-xs" aria-label="Events carousel navigation">
                <button class="slick-prev" aria-label="Previous event">
                    <span class="sr-only">Previous</span>
                </button>
                <button class="slick-next" aria-label="Next event">
                    <span class="sr-only">Next</span>
                </button>
            </nav>
        </div>
    </div>

    <div class="container pt-0 mt-0">
        <div class="entries-carousel" role="region" aria-live="polite" aria-label="Events carousel">
            {% for entry in entries %}
            <article class="row home-event">
                <div class="col-xs-12 event-head">
                    <h3 class="event-title">{{ entry.title|length > 70 ? entry.title|striptags|slice(0, 70)|replace({"&nbsp;": " ", ".": ". "}) ~ '...' : entry.title|striptags|replace({"&nbsp;": " ", ".": ". "})  }}</h3>
                </div>
                <div class="col-xs-12 event-body">
                    <time class="event-start" datetime="{{ entry.start|date('Y-m-d') }}">{{ entry.start|date("d F Y") }}</time>
                    <div class="event-location">{{ entry.place }}</div>
                </div>
            </article>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}


<section class="container" aria-labelledby="newsletter-heading">
    <div class="row container middle-xs between-xs subscribe_newsletter_item">
        <h2 id="newsletter-heading" class="col-xs-12 center-xs mb-2 mt-2 card_title">Sign up to our newsletter and stay up to date!</h2>
        <div class="col-xs-12 center-xs">
            <div class="button_su">
                <span class="su_button_circle desplode-circle" aria-hidden="true"></span>
                <a class="button_su_inner" href="{{this.theme.subscribe}}" target="_blank" rel="noopener noreferrer" aria-label="Subscribe to our newsletter (opens in new window)">
                    <span class="button_text_container">Subscribe</span>
                </a>
            </div>
        </div>
    </div>
</section>
